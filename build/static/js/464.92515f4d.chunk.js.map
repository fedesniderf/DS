{"version":3,"file":"static/js/464.92515f4d.chunk.js","mappings":"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","sources":["components/ClientRoutineList.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { generateUniqueId } from '../utils/helpers';\n\nconst ClientRoutineList = ({\n  client,\n  routines = [],\n  users = [],\n  onSelectRoutine = () => {},\n  onAddRoutine = () => {},\n  isEditable,\n  onDeleteRoutine = () => {},\n  onUpdateRoutine = () => {},\n}) => {\n  const [newRoutineName, setNewRoutineName] = useState('');\n  const [newRoutineStartDate, setNewRoutineStartDate] = useState('');\n  const [newRoutineEndDate, setNewRoutineEndDate] = useState('');\n  const [showAddRoutineForm, setShowAddRoutineForm] = useState(false);\n\n  const handleAddRoutine = () => {\n    // Solo se puede agregar rutina si hay cliente seleccionado (admin o cliente)\n    if (!client) {\n      alert('Debes seleccionar un cliente para agregar una rutina.');\n      return;\n    }\n    if (newRoutineName.trim() && newRoutineStartDate && newRoutineEndDate) {\n      const newRoutine = {\n        client_id: client.client_id,\n        name: newRoutineName,\n        startDate: newRoutineStartDate,\n        endDate: newRoutineEndDate,\n      };\n      onAddRoutine(newRoutine);\n      setNewRoutineName('');\n      setNewRoutineStartDate('');\n      setNewRoutineEndDate('');\n      setShowAddRoutineForm(false);\n    } else {\n      alert('Por favor, completa todos los campos para la nueva rutina.');\n    }\n  };\n\n  const calculateWeeks = (startDate, endDate) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffTime = Math.abs(end - start);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return Math.ceil(diffDays / 7);\n  };\n\n  console.log('client:', client);\n\n  return (\n    <div className=\"p-6 bg-white rounded-2xl shadow-md\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">\n        {/* Si hay cliente seleccionado, muestra su nombre/email. Si no, muestra \"Todas las Rutinas\" */}\n        {client ? `Rutinas de ${client.fullName || client.email}` : 'Todas las Rutinas'}\n      </h2>\n      {Array.isArray(routines) && routines.length > 0 ? (\n        <div className=\"space-y-4\">\n          {routines.map((routine) => {\n            // Si client es null (admin), busca el cliente correspondiente a la rutina para mostrar su nombre/email.\n            const cliente = client\n              ? client\n              : users?.find(u => u.client_id === routine.client_id);\n\n            return (\n              <div key={routine.id || `${routine.client_id}-${routine.name}-${routine.startDate}`} className=\"bg-gray-50 p-4 rounded-xl shadow-sm border border-gray-200\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h3 className=\"text-xl font-semibold text-gray-700\">{routine.name}</h3>\n                  {/* \n                    Si client es null (admin viendo todas las rutinas), muestra el nombre/email del cliente al que pertenece la rutina.\n                    Si client está definido, no muestra este dato porque ya está en el encabezado.\n                  */}\n                  {!client && (\n                    <span className=\"text-sm text-gray-500\">\n                      {cliente ? cliente.fullName || cliente.email : routine.client_id}\n                    </span>\n                  )}\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => {\n                        console.log('ClientRoutineList - routine seleccionada:', routine);\n                        console.log('ClientRoutineList - routine.id:', routine.id);\n                        onSelectRoutine(routine);\n                      }}\n                      className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors font-semibold shadow-md flex items-center justify-center\"\n                      title=\"Ver Detalles\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-5 h-5\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                      </svg>\n                    </button>\n                    {/* Botón para eliminar rutina, solo para admin */}\n                    {isEditable && (\n                      <button\n                        onClick={() => {\n                          if (window.confirm('¿Estás seguro de que quieres eliminar esta rutina?')) {\n                            onDeleteRoutine(routine);\n                          }\n                        }}\n                        className=\"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors font-semibold shadow-md flex items-center justify-center\"\n                        title=\"Eliminar Rutina\"\n                      >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-5 h-5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.924a2.25 2.25 0 01-2.244-2.077L5.072 5.455m11.35.01L12 2.25 7.672 5.455m11.35.01C18.723 5.67 16.16 6.228 12 6.228s-6.723-.558-7.672-.772M9 12h6\" />\n                        </svg>\n                      </button>\n                    )}\n                  </div>\n                </div>\n                <p className=\"text-sm text-gray-600\">\n                  Periodo: {routine.startDate} - {routine.endDate}\n                </p>\n              </div>\n            );\n          })}\n        </div>\n      ) : (\n        // Si no hay rutinas para mostrar, se muestra este mensaje.\n        <p className=\"text-gray-600 text-center py-4\">No hay rutinas registradas aún.</p>\n      )}\n\n      {/* El formulario para agregar rutina solo aparece si isEditable es true */}\n      {isEditable && (\n        <div className=\"mt-6\">\n          <button\n            onClick={() => setShowAddRoutineForm(!showAddRoutineForm)}\n            className=\"w-full bg-black text-white py-3 rounded-xl hover:bg-gray-800 transition-colors font-semibold shadow-md flex items-center justify-center\"\n            title={showAddRoutineForm ? 'Cancelar' : 'Agregar Nueva Rutina'}\n          >\n            {showAddRoutineForm ? (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-6 h-6\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            ) : (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-6 h-6\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n              </svg>\n            )}\n          </button>\n\n          {showAddRoutineForm && (\n            <div className=\"mt-4 p-4 bg-gray-50 rounded-xl shadow-sm border border-gray-200\">\n              <h3 className=\"text-xl font-bold text-gray-700 mb-4\">Nueva Rutina</h3>\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre de la Rutina:</label>\n                <input\n                  type=\"text\"\n                  value={newRoutineName}\n                  onChange={(e) => setNewRoutineName(e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  placeholder=\"Ej. Rutina de Fuerza - Mes 1\"\n                />\n              </div>\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fecha de Inicio:</label>\n                <input\n                  type=\"date\"\n                  value={newRoutineStartDate}\n                  onChange={(e) => setNewRoutineStartDate(e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-black transition\"\n                />\n              </div>\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fecha de Fin:</label>\n                <input\n                  type=\"date\"\n                  value={newRoutineEndDate}\n                  onChange={(e) => setNewRoutineEndDate(e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-black transition\"\n                />\n              </div>\n              <button\n                onClick={handleAddRoutine}\n                className=\"w-full bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 transition-colors font-semibold shadow-md flex items-center justify-center\"\n                title=\"Crear Rutina\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-6 h-6\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n                </svg>\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ClientRoutineList;"],"names":["_ref","client","routines","users","onSelectRoutine","onAddRoutine","isEditable","onDeleteRoutine","onUpdateRoutine","newRoutineName","setNewRoutineName","useState","newRoutineStartDate","setNewRoutineStartDate","newRoutineEndDate","setNewRoutineEndDate","showAddRoutineForm","setShowAddRoutineForm","console","log","_jsxs","className","children","_jsx","fullName","email","Array","isArray","length","map","routine","cliente","find","u","client_id","name","onClick","id","title","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","window","confirm","startDate","endDate","type","value","onChange","e","target","placeholder","handleAddRoutine","trim","newRoutine","alert"],"sourceRoot":""}