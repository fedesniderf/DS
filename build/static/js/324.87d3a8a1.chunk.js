"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[324],{324:(e,r,l)=>{l.r(r),l.d(r,{default:()=>t});var a=l(43),s=l(579);const t=e=>{let{routine:r,onUpdateRoutine:l=()=>{},isEditable:t,onAddExerciseClick:n=()=>{},canAddDailyTracking:o=!1}=e;console.log("RoutineDetail - routine recibida:",r),console.log("RoutineDetail - routine.id:",null===r||void 0===r?void 0:r.id),console.log("RoutineDetail - isEditable:",t),console.log("RoutineDetail - canAddDailyTracking:",o);const[i,d]=a.useState(!1),[c,u]=a.useState(null),[m,g]=a.useState(""),[x,h]=a.useState(""),[p,b]=a.useState(""),[v,j]=a.useState(""),[f,w]=a.useState(""),[N,y]=a.useState(""),[k,C]=a.useState(""),[D,L]=a.useState(""),[E,S]=a.useState(""),[W,I]=a.useState(""),[A,R]=a.useState(""),[P,M]=a.useState(""),T=e=>{u(e),g(e.name||""),h(e.sets||""),b(e.reps||""),j(e.weight||""),w(e.time||""),y(e.rest||""),C(e.day||""),L(e.section||""),S(e.media||""),I(e.rir||""),R(e.cadencia||""),M(e.round||""),d(!0)},B=()=>{if(!r.startDate||!r.endDate)return[];const e=new Date(r.startDate),l=new Date(r.endDate),a=Math.abs(l-e),s=Math.ceil(a/864e5),t=Math.max(1,Math.ceil(s/7));return Array.from({length:t},(e,r)=>({value:(r+1).toString(),label:`Semana ${r+1}`}))},_=Array.isArray(r.exercises)?r.exercises:[],[H,$]=a.useState(()=>{const e=new Set;return _.forEach(r=>{const l=r.day||"Sin d\xeda";e.add(l)}),e}),O=e=>(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2 text-sm text-gray-700",children:[e.sets&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Series:"})," ",e.sets]}),e.reps&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Reps:"})," ",e.reps]}),e.time&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Tiempo (seg):"})," ",e.time]}),e.rest&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Descanso (seg):"})," ",e.rest]}),e.weight&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Peso (Kg):"})," ",e.weight]}),e.rir&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"RIR:"})," ",e.rir]}),e.cadencia&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Cadencia:"})," ",e.cadencia]})]}),[q,F]=a.useState(()=>{const e=new Set;return _.forEach(r=>{const l=r.day||"Sin d\xeda",a=r.section||"Sin secci\xf3n";e.add(`${l}-${a}`)}),e}),[V,z]=a.useState(!1),[U,Z]=a.useState(null),[G,K]=a.useState(""),[J,Q]=a.useState(""),[X,Y]=a.useState(""),[ee,re]=a.useState(!1),[le,ae]=a.useState(null),[se,te]=a.useState(()=>{const e=new Set;return _.forEach(r=>{e.add(r.id)}),e}),[ne,oe]=a.useState(!1),[ie,de]=a.useState(""),[ce,ue]=a.useState(""),[me,ge]=a.useState(""),[xe,he]=a.useState(!1),[pe,be]=a.useState(""),[ve,je]=a.useState(!1),[fe,we]=a.useState(""),[Ne,ye]=a.useState(""),[ke,Ce]=a.useState(""),[De,Le]=a.useState(""),Ee=e=>{const r=new Set(q);r.has(e)?r.delete(e):r.add(e),F(r)},Se=e=>{if(!r.startDate||!r.endDate)return null;const l=B(),a=se.has(e.id),t=(e=>{if(!e.weeklyData)return 0;const r=Object.values(e.weeklyData).map(e=>parseFloat(e.weight)||0).filter(e=>e>0);return r.length>0?Math.max(...r):0})(e);return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer p-2 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",onClick:()=>(e=>{const r=new Set(se);r.has(e)?r.delete(e):r.add(e),te(r)})(e.id),children:[(0,s.jsxs)("h6",{className:"text-sm font-semibold text-purple-700",children:["Seguimiento Semanal ",t>0&&`(M\xe1ximo: ${t} kg)`]}),(0,s.jsx)("svg",{className:"w-4 h-4 text-purple-700 transform transition-transform "+(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!a&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("table",{className:"w-full text-sm border border-purple-300 rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-purple-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-2 py-1 text-center w-20",children:"Semana"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center w-24",children:"Peso (kg)"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center w-auto",children:"Notas"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center w-24",children:"Fecha"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center w-20",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:l.map(r=>{var l;const a=null===(l=e.weeklyData)||void 0===l?void 0:l[r.value];return(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"px-2 py-1 font-medium text-center",children:r.label}),(0,s.jsx)("td",{className:"px-2 py-1 text-center",children:null!==a&&void 0!==a&&a.weight?`${a.weight} kg`:"-"}),(0,s.jsx)("td",{className:"px-2 py-1 text-center max-w-0",children:(0,s.jsx)("div",{className:"break-words whitespace-normal",children:(null===a||void 0===a?void 0:a.generalNotes)||"-"})}),(0,s.jsx)("td",{className:"px-2 py-1 text-xs text-gray-500 text-center",children:(null===a||void 0===a?void 0:a.date)||"-"}),(0,s.jsx)("td",{className:"px-2 py-1",children:(0,s.jsx)("div",{className:"flex gap-1 justify-center",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"p-1 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700 transition-colors",title:"Editar seguimiento",onClick:l=>{l.stopPropagation(),Ie(e,r.value,a)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),(0,s.jsx)("button",{className:"p-1 rounded-full bg-red-100 hover:bg-red-200 text-red-700 transition-colors",title:"Eliminar seguimiento",onClick:l=>{l.stopPropagation(),Ae(e,r.value)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]}):(0,s.jsx)("button",{className:"p-1 rounded-full bg-green-100 hover:bg-green-200 text-green-700 transition-colors",title:"Agregar seguimiento",onClick:l=>{l.stopPropagation(),We(e,r.value)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})})})]},r.value)})})]}),t>0&&(0,s.jsx)("div",{className:"mt-2 p-2 bg-green-50 rounded text-sm",children:(0,s.jsxs)("span",{className:"font-semibold text-green-700",children:["Mayor peso levantado: ",t," kg"]})})]})]})},We=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Z(e),K(r),Q(""),Y(""),re(!1),ae(null),z(!0)},Ie=(e,r,l)=>{console.log("handleEditWeeklyTracking called with:",{exercise:e,weekValue:r,weekData:l});try{Z(e),K(r),Q(l.weight||""),Y(l.generalNotes||""),re(!0),ae(l),z(!0)}catch(a){console.error("Error in handleEditWeeklyTracking:",a),alert("Error al abrir el modal de edici\xf3n: "+a.message)}},Ae=(e,a)=>{console.log("handleDeleteWeeklyTracking called with:",{exercise:e,weekValue:a});try{if(!confirm("\xbfEst\xe1s seguro de que quieres eliminar este seguimiento semanal?"))return;const s=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(!s)return console.error("Error: ID de rutina no encontrado para eliminar seguimiento semanal",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");console.log("Deleting weekly tracking with data:",{id:s,action:"deleteWeeklyTracking",data:{exerciseId:e.id,week:a}}),l({id:s,action:"deleteWeeklyTracking",data:{exerciseId:e.id,week:a}})}catch(s){console.error("Error in handleDeleteWeeklyTracking:",s),alert("Error al eliminar el seguimiento: "+s.message)}},Re=()=>{z(!1),Z(null),K(""),Q(""),Y(""),re(!1),ae(null)},Pe=()=>{oe(!1),de(""),ue(""),ge(""),he(!1),be("")},Me=()=>{je(!1),we(""),ye(""),Ce(""),Le("")},Te=e=>{if(!confirm("\xbfEst\xe1s seguro de que quieres eliminar este ejercicio?"))return;const a=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(!a)return console.error("Error: ID de rutina no encontrado para eliminar ejercicio",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");l({id:a,action:"deleteExercise",data:{exerciseId:e}})},Be=(e,a)=>{if(console.log("handleDeleteSection called with:",{day:e,section:a}),console.log("routine:",r),console.log("isEditable:",t),!confirm(`\xbfEst\xe1s seguro de que quieres eliminar todos los ejercicios de la secci\xf3n "${a}" del ${["1","2","3","4","5","6","7"].includes(e)?`D\xeda ${e}`:"d\xeda sin asignar"}?`))return;const s=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(!s)return console.error("Error: ID de rutina no encontrado para eliminar secci\xf3n",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");console.log("Calling onUpdateRoutine with:",{id:s,action:"deleteSection",data:{day:e,section:a}}),l({id:s,action:"deleteSection",data:{day:e,section:a}})};let _e=null;if(0===_.length)_e=(0,s.jsx)("p",{className:"text-gray-600 text-center py-4",children:"No hay ejercicios para seguimiento."});else{const e=_.reduce((e,r)=>{const l=r.day||"Sin d\xeda";e[l]||(e[l]={});const a=r.section||"Sin secci\xf3n";return e[l][a]||(e[l][a]=[]),e[l][a].push(r),e},{}),a=["Warm Up","Activaci\xf3n","Core","Trabajo DS","Out"];_e=["1","2","3","4","5","6","7"].filter(r=>e[r]).concat(Object.keys(e).filter(e=>!["1","2","3","4","5","6","7"].includes(e))).map(n=>(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors flex-1",onClick:()=>(e=>{const r=new Set(H);r.has(e)?r.delete(e):r.add(e),$(r)})(n),children:[(0,s.jsx)("h4",{className:"text-lg font-bold text-blue-700",children:["1","2","3","4","5","6","7"].includes(n)?`D\xeda ${n}`:"Sin d\xeda asignado"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-700 transform transition-transform "+(H.has(n)?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t&&(0,s.jsx)("button",{onClick:e=>{console.log("Delete day button clicked for day:",n),e.stopPropagation(),(e=>{if(console.log("handleDeleteDay called with day:",e),console.log("routine:",r),console.log("isEditable:",t),!confirm(`\xbfEst\xe1s seguro de que quieres eliminar todos los ejercicios del ${["1","2","3","4","5","6","7"].includes(e)?`D\xeda ${e}`:"d\xeda sin asignar"}?`))return;const a=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(!a)return console.error("Error: ID de rutina no encontrado para eliminar d\xeda",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");console.log("Calling onUpdateRoutine with:",{id:a,action:"deleteDay",data:{day:e}}),l({id:a,action:"deleteDay",data:{day:e}})})(n)},className:"p-1 rounded-full bg-red-100 hover:bg-red-200 text-red-700 transition-colors flex-shrink-0",title:"Eliminar d\xeda completo",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]}),!H.has(n)&&(0,s.jsxs)("div",{className:"mt-4",children:[a.map(r=>{if(!e[n][r])return null;const l=`${n}-${r}`;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer p-2 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors flex-1",onClick:()=>Ee(l),children:[(0,s.jsx)("h5",{className:"text-md font-semibold text-purple-700",children:r}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-purple-700 transform transition-transform "+(q.has(l)?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t&&(0,s.jsx)("button",{onClick:e=>{console.log("Delete section button clicked for:",{day:n,section:r}),e.stopPropagation(),Be(n,r)},className:"p-1 rounded-full bg-red-100 hover:bg-red-200 text-red-700 transition-colors flex-shrink-0",title:"Eliminar secci\xf3n completa",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]}),!q.has(l)&&(0,s.jsx)("div",{className:"grid gap-4 mt-3",children:e[n][r].map(e=>(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h6",{className:"text-md font-semibold text-gray-800",children:e.name}),e.media&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700 transition-colors",title:"Ver video del ejercicio",onClick:()=>window.open(e.media,"_blank"),children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})]})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[o&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-purple-100 hover:bg-purple-200 text-purple-700",title:"Agregar seguimiento semanal",onClick:()=>We(e),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),t&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700",title:"Editar ejercicio",onClick:()=>T(e),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),t&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-red-100 hover:bg-red-200 text-red-700",title:"Eliminar ejercicio",onClick:()=>Te(e.id),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})]}),O(e),Se(e)]},e.id))})]},r)}),Object.keys(e[n]).filter(e=>!a.includes(e)).map(r=>{const l=`${n}-${r}`;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",onClick:()=>Ee(l),children:[(0,s.jsx)("h5",{className:"text-md font-semibold text-gray-700",children:r}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),Be(n,r)},className:"p-1 rounded-full bg-red-100 hover:bg-red-200 text-red-700 transition-colors",title:"Eliminar secci\xf3n completa",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})}),(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-700 transform transition-transform "+(q.has(l)?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),!q.has(l)&&(0,s.jsx)("div",{className:"grid gap-4 mt-3",children:e[n][r].map(e=>(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h6",{className:"text-md font-semibold text-gray-800",children:e.name}),e.media&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700 transition-colors",title:"Ver video del ejercicio",onClick:()=>window.open(e.media,"_blank"),children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})]})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[o&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-purple-100 hover:bg-purple-200 text-purple-700",title:"Agregar seguimiento semanal",onClick:()=>We(e),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),t&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700",title:"Editar ejercicio",onClick:()=>T(e),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),t&&(0,s.jsx)("button",{className:"p-1 rounded-full bg-red-100 hover:bg-red-200 text-red-700",title:"Eliminar ejercicio",onClick:()=>Te(e.id),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})]}),O(e),Se(e)]},e.id))})]},r)})]})]},n))}return(0,s.jsxs)("div",{className:"p-6 bg-white rounded-2xl shadow-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:r.name||"Rutina sin nombre"}),t&&(0,s.jsx)("button",{onClick:()=>{we(r.name||""),ye(r.startDate||""),Ce(r.endDate||""),Le(r.description||""),je(!0)},className:"p-2 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700 transition-colors",title:"Editar rutina",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})})]}),(0,s.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Fecha de inicio:"})," ",r.startDate||"No especificada"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Fecha de fin:"})," ",r.endDate||"No especificada"]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Descripci\xf3n:"})," ",r.description||"Sin descripci\xf3n"]})]})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Ejercicios"}),t&&(0,s.jsx)("button",{onClick:n,className:"p-2 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700 transition-colors",title:"Agregar nuevo ejercicio",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})]}),_e]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer p-2 bg-green-50 rounded-lg hover:bg-green-100 transition-colors mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-green-700",children:"Percepciones"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:o&&(0,s.jsx)("button",{onClick:()=>{de((new Date).toISOString().split("T")[0]),ue(""),ge(""),he(!1),be(""),oe(!0)},className:"p-1 rounded-full bg-green-100 hover:bg-green-200 text-green-700 transition-colors",title:"Agregar Seguimiento Diario",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})})]}),r.dailyTracking&&Object.keys(r.dailyTracking).length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm border border-green-300 rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-green-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-2 py-1 text-center w-28",children:"Fecha"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center w-16",children:"PF"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center w-16",children:"PE"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center w-20",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:Object.entries(r.dailyTracking).sort((e,r)=>{let[l]=e,[a]=r;return new Date(a)-new Date(l)}).map(e=>{let[a,t]=e;return(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"px-2 py-1 text-center text-xs",children:a}),(0,s.jsx)("td",{className:"px-2 py-1 text-center font-medium",children:t.pf}),(0,s.jsx)("td",{className:"px-2 py-1 text-center font-medium",children:t.pe}),(0,s.jsx)("td",{className:"px-2 py-1",children:(0,s.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,s.jsx)("button",{onClick:()=>((e,r)=>{console.log("handleEditDaily called with:",{date:e,data:r});try{de(e),ue(null!=(null===r||void 0===r?void 0:r.pf)?r.pf.toString():""),ge(null!=(null===r||void 0===r?void 0:r.pe)?r.pe.toString():""),he(!0),be(e),oe(!0)}catch(l){console.error("Error in handleEditDaily:",l),console.error("Data received:",r),alert("Error al abrir el modal de edici\xf3n: "+l.message)}})(a,t),className:"p-1 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-700 transition-colors",title:"Editar seguimiento",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})}),(0,s.jsx)("button",{onClick:()=>(e=>{if(!confirm("\xbfEst\xe1s seguro de que quieres eliminar este registro diario?"))return;const a=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(!a)return console.error("Error: ID de rutina no encontrado para eliminar seguimiento diario",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");l({id:a,action:"deleteDailyRoutineTracking",data:{date:e}})})(a),className:"p-1 rounded-full bg-red-100 hover:bg-red-200 text-red-700 transition-colors",title:"Eliminar seguimiento",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})})]},a)})})]})}):(0,s.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No hay percepciones registradas a\xfan."})]}),ne&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:xe?"Editar seguimiento diario":"Seguimiento Diario de la Rutina"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:xe?"Modifica tu percepci\xf3n de fatiga y esfuerzo":"Registra tu percepci\xf3n de fatiga y esfuerzo"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha del entrenamiento"}),(0,s.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:ie,onChange:e=>de(e.target.value),disabled:xe})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percepci\xf3n de Fatiga (PF) - 1 a 10"}),(0,s.jsx)("input",{type:"number",min:"1",max:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 7",value:ce,onChange:e=>ue(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percepci\xf3n de Esfuerzo (PE) - 1 a 10"}),(0,s.jsx)("input",{type:"number",min:"1",max:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 8",value:me,onChange:e=>ge(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{if(!ie||!ce||!me)return void alert("Por favor completa todos los campos requeridos");const e=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(!e)return console.error("Error: ID de rutina no encontrado para seguimiento diario",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");try{const r={date:ie,pf:parseInt(ce)||0,pe:parseInt(me)||0,timestamp:(new Date).toISOString()};console.log("Saving daily data:",r),console.log("Is editing:",xe),l({id:e,action:xe?"updateDailyRoutineTracking":"addDailyRoutineTracking",data:xe?{...r,originalDate:pe}:r}),Pe()}catch(a){console.error("Error in handleSaveDaily:",a),alert("Error al guardar el seguimiento diario: "+a.message)}},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:xe?"Actualizar":"Guardar"}),(0,s.jsx)("button",{onClick:Pe,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})}),V&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:ee?"Editar seguimiento semanal":"Seguimiento Semanal"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Ejercicio: ",(0,s.jsx)("span",{className:"font-semibold",children:null===U||void 0===U?void 0:U.name})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semana"}),(0,s.jsxs)("select",{value:G,onChange:e=>K(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:ee,children:[(0,s.jsx)("option",{value:"",children:"Selecciona una semana"}),B().map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (kg)"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:J,onChange:e=>Q(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 80.5"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas generales"}),(0,s.jsx)("textarea",{value:X,onChange:e=>Y(e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Observaciones, sensaciones, etc."})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{if(console.log("handleSaveWeekly called with:",{weekNumber:G,weeklyExercise:U,weekWeight:J,weekNotes:X,isEditingWeekly:ee,editingWeeklyData:le}),G&&U)try{const e=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(!e)return console.error("Error: ID de rutina no encontrado para seguimiento semanal",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");const a={week:G,weight:J,generalNotes:X,date:ee?le.date:(new Date).toISOString().split("T")[0]},s={id:e,action:ee?"updateWeeklyTracking":"addWeeklyTracking",data:{exerciseId:U.id,weeklyData:a}};console.log("Calling onUpdateRoutine with:",s),l(s),Re()}catch(e){console.error("Error in handleSaveWeekly:",e),alert("Error al guardar el seguimiento: "+e.message)}else alert("Por favor completa todos los campos requeridos")},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:ee?"Actualizar":"Guardar"}),(0,s.jsx)("button",{onClick:Re,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})}),ve&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Editar Rutina"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la rutina"}),(0,s.jsx)("input",{type:"text",value:fe,onChange:e=>we(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Rutina de fuerza"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de inicio"}),(0,s.jsx)("input",{type:"date",value:Ne,onChange:e=>ye(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de fin"}),(0,s.jsx)("input",{type:"date",value:ke,onChange:e=>Ce(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,s.jsx)("textarea",{value:De,onChange:e=>Le(e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe los objetivos y caracter\xedsticas de la rutina"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{console.log("handleSaveRoutine - routine completa:",r),console.log("handleSaveRoutine - routine.id:",null===r||void 0===r?void 0:r.id),console.log("handleSaveRoutine - typeof routine.id:",typeof(null===r||void 0===r?void 0:r.id));const e=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);if(console.log("handleSaveRoutine - routineId encontrado:",e),!r||!e)return console.error("Error: ID de rutina no encontrado",r),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");const a={name:fe,startDate:Ne,endDate:ke,description:De};console.log("Guardando rutina:",{id:e,action:"updateRoutineInfo",data:a}),l({id:e,action:"updateRoutineInfo",data:a}),Me()},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Guardar"}),(0,s.jsx)("button",{onClick:Me,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})}),i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:c?"Editar Ejercicio":"Agregar Ejercicio"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del ejercicio"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Sentadilla"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Series"}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 3"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repeticiones"}),(0,s.jsx)("input",{type:"text",value:p,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 10-12"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (kg)"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 80"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiempo (seg)"}),(0,s.jsx)("input",{type:"text",value:f,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 30"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descanso (seg)"}),(0,s.jsx)("input",{type:"text",value:N,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 90"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RIR (Reps in Reserve)"}),(0,s.jsx)("input",{type:"text",value:W,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cadencia"}),(0,s.jsx)("input",{type:"text",value:A,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 3-1-2-1"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL de Media (video/imagen)"}),(0,s.jsx)("input",{type:"url",value:E,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: https://youtube.com/ejercicio"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xeda"}),(0,s.jsx)("select",{value:k,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"",label:"Selecciona un d\xeda"},{value:"1",label:"D\xeda 1"},{value:"2",label:"D\xeda 2"},{value:"3",label:"D\xeda 3"},{value:"4",label:"D\xeda 4"},{value:"5",label:"D\xeda 5"},{value:"6",label:"D\xeda 6"},{value:"7",label:"D\xeda 7"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secci\xf3n"}),(0,s.jsx)("select",{value:D,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"",label:"Selecciona una secci\xf3n"},{value:"Warm Up",label:"Warm Up"},{value:"Activaci\xf3n",label:"Activaci\xf3n"},{value:"Core",label:"Core"},{value:"Trabajo DS",label:"Trabajo DS"},{value:"Out",label:"Out"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round"}),(0,s.jsx)("input",{type:"text",value:P,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 1"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{const e=(null===r||void 0===r?void 0:r.id)||(null===r||void 0===r?void 0:r.routine_id)||(null===r||void 0===r?void 0:r.client_id);var a;if(console.log("routineId detectado:",e),!r||!e)return console.error("Error: ID de rutina no encontrado",{routine:r,routineId:e,availableKeys:Object.keys(r||{}),routineType:typeof r,routineConstructor:null===r||void 0===r||null===(a=r.constructor)||void 0===a?void 0:a.name}),void alert("Error: No se encontr\xf3 el ID de la rutina. Por favor, recarga la p\xe1gina.");const s={...c,name:m,sets:x,reps:p,weight:v,time:f,rest:N,day:k,section:D,media:E,rir:W,cadencia:A,round:P};console.log("Datos a guardar:",s),console.log("Llamando onUpdateRoutine con:",{id:e,action:"editExercise",data:s}),l({id:e,action:"editExercise",data:s}),d(!1),u(null),g(""),h(""),b(""),j(""),w(""),y(""),C(""),L(""),S(""),I(""),R(""),M("")},disabled:!m.trim(),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",children:"Guardar"}),(0,s.jsx)("button",{onClick:()=>{d(!1),u(null),g(""),h(""),b(""),j(""),w(""),y(""),C(""),L(""),S(""),I(""),R(""),M("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})})]})}}}]);
//# sourceMappingURL=324.87d3a8a1.chunk.js.map