<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Menú de Configuración</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .demo-section {
            border: 2px solid #e5e7eb;
            margin: 15px;
            padding: 20px;
            border-radius: 8px;
            background: white;
        }
        
        .settings-demo {
            position: relative;
            display: inline-block;
        }
        
        .menu-demo {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 8px;
            width: 256px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            z-index: 50;
        }
        
        .menu-demo.show {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <h1 class="text-3xl font-bold mb-6 text-center">Prueba de Menú de Configuración</h1>
    
    <!-- Demo del Header con Menú -->
    <div class="demo-section">
        <h2 class="text-xl font-semibold mb-4">Header con Menú de Configuración</h2>
        
        <!-- Simulación del header -->
        <header class="bg-white shadow-md p-4 flex items-center justify-between sticky top-0 z-10 rounded-lg">
            <div class="w-6 h-6"></div>
            <h1 class="text-2xl font-bold text-gray-800">Mi App</h1>
            <div class="flex items-center gap-2 sm:gap-3">
                <!-- Menú de configuración -->
                <div class="settings-demo">
                    <button 
                        onclick="toggleMenu()"
                        class="p-2 sm:p-3 rounded-full transition-colors duration-200 text-gray-600 hover:text-gray-800 hover:bg-gray-100"
                        title="Configuración"
                    >
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m0 6h9.75m-9.75 0a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0m-3.75 0H3.75m0 6h9.75M10.5 18a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0m-3.75 0H7.5" />
                        </svg>
                    </button>

                    <!-- Menú desplegable -->
                    <div id="settingsMenu" class="menu-demo">
                        <div class="py-2">
                            <!-- Encabezado del menú -->
                            <div class="px-4 py-2 border-b border-gray-100">
                                <h3 class="text-sm font-semibold text-gray-700">Configuración</h3>
                            </div>

                            <!-- Opción Wake Lock -->
                            <div class="px-4 py-3 hover:bg-gray-50 transition-colors">
                                <button onclick="toggleWakeLock()" class="w-full flex items-center justify-between text-left">
                                    <div class="flex items-center space-x-3">
                                        <svg id="wakeLockIcon" class="w-5 h-5 text-gray-600" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M4.5 9.75V6A1.5 1.5 0 016 4.5h12A1.5 1.5 0 0119.5 6v3.75M4.5 9.75H18a1.5 1.5 0 011.5 1.5v7.5a1.5 1.5 0 01-1.5 1.5H4.5a1.5 1.5 0 01-1.5-1.5v-7.5a1.5 1.5 0 011.5-1.5zm15 0V6a.75.75 0 00-.75-.75H6a.75.75 0 00-.75.75v3.75h14.25z" />
                                        </svg>
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">
                                                Mantener pantalla encendida
                                            </div>
                                            <div id="wakeLockStatus" class="text-xs text-gray-500">
                                                Permitir que la pantalla se apague
                                            </div>
                                        </div>
                                    </div>
                                    <div id="wakeLockToggle" class="ml-3 relative inline-flex h-6 w-11 items-center rounded-full transition-colors bg-gray-200">
                                        <span id="wakeLockSwitch" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1"></span>
                                    </div>
                                </button>
                            </div>

                            <!-- Divider -->
                            <div class="border-t border-gray-100 my-1"></div>

                            <!-- Opción Cerrar Sesión -->
                            <div class="px-4 py-3 hover:bg-red-50 transition-colors">
                                <button onclick="logout()" class="w-full flex items-center space-x-3 text-left text-red-600 hover:text-red-700">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 005.25 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
                                    </svg>
                                    <div>
                                        <div class="text-sm font-medium">Cerrar Sesión</div>
                                        <div class="text-xs text-red-500">Salir de la aplicación</div>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Logo -->
                <img src="https://4tsix0yujj.ufs.sh/f/2vMRHqOYUHc03OCANFku0HlIPwSxAEOXk6nTjd9beaNftrh5" alt="Logo" class="h-8 w-auto sm:h-10" />
            </div>
        </header>
    </div>

    <!-- Explicación de Funcionalidades -->
    <div class="demo-section">
        <h2 class="text-xl font-semibold mb-4">Funcionalidades del Menú</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-blue-50 p-4 rounded-lg">
                <h3 class="font-semibold text-blue-900 mb-2">🔧 Icono de Configuración</h3>
                <p class="text-blue-800 text-sm">
                    Reemplaza el botón directo de logout. Al hacer clic, despliega un menú con opciones.
                </p>
            </div>
            
            <div class="bg-green-50 p-4 rounded-lg">
                <h3 class="font-semibold text-green-900 mb-2">🔋 Wake Lock Toggle</h3>
                <p class="text-green-800 text-sm">
                    Opción integrada en el menú para mantener la pantalla encendida con switch visual.
                </p>
            </div>
            
            <div class="bg-red-50 p-4 rounded-lg">
                <h3 class="font-semibold text-red-900 mb-2">🚪 Cerrar Sesión</h3>
                <p class="text-red-800 text-sm">
                    Opción de logout integrada en el menú con icono y descripción clara.
                </p>
            </div>
            
            <div class="bg-purple-50 p-4 rounded-lg">
                <h3 class="font-semibold text-purple-900 mb-2">📱 Responsive Design</h3>
                <p class="text-purple-800 text-sm">
                    Menú adaptativo que funciona bien en dispositivos móviles y desktop.
                </p>
            </div>
        </div>
    </div>

    <!-- Estados del Toggle -->
    <div class="demo-section">
        <h2 class="text-xl font-semibold mb-4">Estados del Wake Lock</h2>
        
        <div class="space-y-4">
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <span class="text-sm font-medium">Estado Actual:</span>
                <span id="currentState" class="text-sm text-gray-600">Desactivado</span>
            </div>
            
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <span class="text-sm font-medium">Soporte del Navegador:</span>
                <span id="browserSupport" class="text-sm text-green-600">Verificando...</span>
            </div>
        </div>
    </div>

    <div class="mt-6 p-4 bg-yellow-50 rounded-lg">
        <h3 class="font-semibold text-yellow-900 mb-2">Instrucciones de Prueba:</h3>
        <ol class="text-sm text-yellow-800 space-y-1">
            <li>1. Haz clic en el icono de configuración (⚙️) en el header</li>
            <li>2. Observa el menú desplegable con las opciones</li>
            <li>3. Prueba el toggle de Wake Lock</li>
            <li>4. Verifica que el menú se cierre al hacer clic fuera</li>
            <li>5. Prueba la opción de cerrar sesión</li>
        </ol>
    </div>

    <script>
        let wakeLockActive = false;
        
        function toggleMenu() {
            const menu = document.getElementById('settingsMenu');
            menu.classList.toggle('show');
        }
        
        function toggleWakeLock() {
            wakeLockActive = !wakeLockActive;
            updateWakeLockUI();
            document.getElementById('currentState').textContent = wakeLockActive ? 'Activado' : 'Desactivado';
        }
        
        function updateWakeLockUI() {
            const icon = document.getElementById('wakeLockIcon');
            const status = document.getElementById('wakeLockStatus');
            const toggle = document.getElementById('wakeLockToggle');
            const switchElement = document.getElementById('wakeLockSwitch');
            
            if (wakeLockActive) {
                // Estado activado
                icon.innerHTML = '<path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z" />';
                status.textContent = 'Pantalla siempre encendida';
                toggle.className = 'ml-3 relative inline-flex h-6 w-11 items-center rounded-full transition-colors bg-green-600';
                switchElement.className = 'inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-6';
            } else {
                // Estado desactivado
                icon.innerHTML = '<path d="M4.5 9.75V6A1.5 1.5 0 016 4.5h12A1.5 1.5 0 0119.5 6v3.75M4.5 9.75H18a1.5 1.5 0 011.5 1.5v7.5a1.5 1.5 0 01-1.5 1.5H4.5a1.5 1.5 0 01-1.5-1.5v-7.5a1.5 1.5 0 011.5-1.5zm15 0V6a.75.75 0 00-.75-.75H6a.75.75 0 00-.75.75v3.75h14.25z" />';
                status.textContent = 'Permitir que la pantalla se apague';
                toggle.className = 'ml-3 relative inline-flex h-6 w-11 items-center rounded-full transition-colors bg-gray-200';
                switchElement.className = 'inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1';
            }
        }
        
        function logout() {
            alert('Cerrando sesión...');
            toggleMenu();
        }
        
        // Cerrar menú al hacer clic fuera
        document.addEventListener('click', function(event) {
            const settingsDemo = document.querySelector('.settings-demo');
            const menu = document.getElementById('settingsMenu');
            
            if (!settingsDemo.contains(event.target)) {
                menu.classList.remove('show');
            }
        });
        
        // Verificar soporte de Wake Lock
        if ('wakeLock' in navigator) {
            document.getElementById('browserSupport').textContent = 'Soportado ✅';
            document.getElementById('browserSupport').className = 'text-sm text-green-600';
        } else {
            document.getElementById('browserSupport').textContent = 'No soportado ❌';
            document.getElementById('browserSupport').className = 'text-sm text-red-600';
        }
    </script>
</body>
</html>
